{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(listReload),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(coinsListSaga);\n\nimport { all, takeEvery, put, fork, call } from 'redux-saga/effects';\nimport cloneDeep from 'lodash/cloneDeep';\nimport actions from './actions';\nimport { coinsAPI } from '../../helpers/api/coins';\nvar messages = {\n  errorListLoad: 'Loading Coins list failed'\n};\n\nfunction listReload() {\n  return _regeneratorRuntime.wrap(function listReload$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return takeEvery(actions.COINS_LIST_RELOAD, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n            var entities, res;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.next = 2;\n                    return put(actions.uiRefresh({\n                      loading: true\n                    }));\n\n                  case 2:\n                    entities = {};\n                    _context.prev = 3;\n                    _context.next = 6;\n                    return call(coinsAPI.coinsList);\n\n                  case 6:\n                    res = _context.sent;\n\n                    if (res && res.status === 200) {\n                      entities = res.data.data;\n                    }\n\n                    ;\n                    _context.next = 15;\n                    break;\n\n                  case 11:\n                    _context.prev = 11;\n                    _context.t0 = _context[\"catch\"](3);\n                    alert(messages.errorListLoad, _context.t0);\n                    console.log(_context.t0);\n\n                  case 15:\n                    _context.next = 17;\n                    return put(actions.listRefresh(entities));\n\n                  case 17:\n                    _context.next = 19;\n                    return put(actions.uiRefresh({\n                      loading: false\n                    }));\n\n                  case 19:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, null, [[3, 11]]);\n          }));\n\n        case 2:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked);\n}\n\nexport default function coinsListSaga() {\n  return _regeneratorRuntime.wrap(function coinsListSaga$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return all([fork(listReload)]);\n\n        case 2:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked2);\n}","map":{"version":3,"sources":["/home/user/Desktop/CoinState/Coins/Redux/Coins/saga.js"],"names":["listReload","coinsListSaga","all","takeEvery","put","fork","call","cloneDeep","actions","coinsAPI","messages","errorListLoad","COINS_LIST_RELOAD","uiRefresh","loading","entities","coinsList","res","status","data","alert","console","log","listRefresh"],"mappings":";;oDAUUA,U;qDAoBeC,a;;AA9BzB,SAASC,GAAT,EAAcC,SAAd,EAAyBC,GAAzB,EAA8BC,IAA9B,EAAoCC,IAApC,QAAgD,oBAAhD;AACA,OAAOC,SAAP,MAAsB,kBAAtB;AACA,OAAOC,OAAP,MAAoB,WAApB;AAEA,SAASC,QAAT,QAAyB,yBAAzB;AAEA,IAAMC,QAAQ,GAAG;AACfC,EAAAA,aAAa,EAAG;AADD,CAAjB;;AAIA,SAAUX,UAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,iBAAMG,SAAS,CAACK,OAAO,CAACI,iBAAT,wCAA4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACzC,2BAAMR,GAAG,CAACI,OAAO,CAACK,SAAR,CAAkB;AAAEC,sBAAAA,OAAO,EAAE;AAAX,qBAAlB,CAAD,CAAT;;AADyC;AAErCC,oBAAAA,QAFqC,GAE1B,EAF0B;AAAA;AAAA;AAK3B,2BAAMT,IAAI,CAACG,QAAQ,CAACO,SAAV,CAAV;;AAL2B;AAKjCC,oBAAAA,GALiC;;AAMvC,wBAAIA,GAAG,IAAIA,GAAG,CAACC,MAAJ,KAAe,GAA1B,EAA+B;AAC7BH,sBAAAA,QAAQ,GAAGE,GAAG,CAACE,IAAJ,CAASA,IAApB;AACD;;AAAA;AARsC;AAAA;;AAAA;AAAA;AAAA;AAUvCC,oBAAAA,KAAK,CAACV,QAAQ,CAACC,aAAV,cAAL;AACAU,oBAAAA,OAAO,CAACC,GAAR;;AAXuC;AAAA;AAczC,2BAAMlB,GAAG,CAACI,OAAO,CAACe,WAAR,CAAoBR,QAApB,CAAD,CAAT;;AAdyC;AAAA;AAezC,2BAAMX,GAAG,CAACI,OAAO,CAACK,SAAR,CAAkB;AAAEC,sBAAAA,OAAO,EAAE;AAAX,qBAAlB,CAAD,CAAT;;AAfyC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAA5B,EAAf;;AADF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAoBA,eAAe,SAAUb,aAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AACb,iBAAMC,GAAG,CAAC,CAACG,IAAI,CAACL,UAAD,CAAL,CAAD,CAAT;;AADa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import { all, takeEvery, put, fork, call } from 'redux-saga/effects';\nimport cloneDeep from 'lodash/cloneDeep';\nimport actions from './actions';\n\nimport { coinsAPI } from '../../helpers/api/coins';\n\nconst messages = {\n  errorListLoad : 'Loading Coins list failed',\n};\n\nfunction* listReload() {\n  yield takeEvery(actions.COINS_LIST_RELOAD, function* () {\n    yield put(actions.uiRefresh({ loading: true }));\n    let entities = {};\n\n    try {\n      const res = yield call(coinsAPI.coinsList);\n      if (res && res.status === 200) {\n        entities = res.data.data;\n      };\n    } catch (error) {\n      alert(messages.errorListLoad, error);\n      console.log(error);\n    }\n\n    yield put(actions.listRefresh(entities));\n    yield put(actions.uiRefresh({ loading: false }));\n  });\n}\n\nexport default function* coinsListSaga() {\n  yield all([fork(listReload)]);\n}\n"]},"metadata":{},"sourceType":"module"}